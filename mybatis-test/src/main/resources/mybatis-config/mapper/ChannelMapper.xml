<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.zjz.db.kindergarten.pay.channel.mapper.ChannelMapper">

    <!-- 查询所有网站信息 -->
    <select id="selectKin" resultType="com.zjz.db.kindergarten.pay.channel.model.KindergartenModel">
        select id, shop_id from kindergartens where shop_id is not null
    </select>

    <select id="selectPayConfig" resultType="com.zjz.db.kindergarten.pay.channel.model.PaymentParamConfig">
        SELECT param.merchant_code, param.channel_code, param.channel_name FROM t_payment_channel_config channel
        left join t_payment_param_config param on channel.channel_code = param.channel_code
        where channel.status = 1 and param.status = 1
    </select>

    <insert id="updateMapping" parameterType="com.zjz.db.kindergarten.pay.channel.vo.PayChannelConfigDataVO">
        insert into `panda-platform`.kindergarten_pay_channel_mapping(kindergarten_id, channel_code, channel_name, status)
        values (#{kindergartenId}, #{channelCode}, #{channelName}, #{status})
    </insert>

</mapper>